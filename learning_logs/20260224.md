# ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” !! ğŸˆ

# RESTful API ëª…ì„¸ì„œ ì‘ì„±
- RESTful APIëŠ” ì´ìš©í•˜ëŠ” ê°œë°œìê°€ ê·¸ ê¸°ëŠ¥ê³¼ ì‘ë™ì„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì ì ˆíˆ ë¬¸ì„œí™”ê°€ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤(ì–´ì œ notion ì˜ˆì‹œ ë³´ì—¬ë“œë ¸ìŠµë‹ˆë‹¤). ê·¸ë¦¬ê³  ê·¸ ë¬¸ì„œì—ëŠ” ì´ìš©í•  ìˆ˜ ìˆëŠ” ì—”ë“œí¬ì¸íŠ¸, í—ˆìš©ë˜ëŠ” ë°ì´í„° í˜•ì‹, APIì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ë²• ë“±ì´ í¬í•¨ë˜ì–´ì•¼ í•œë‹¤.

- í˜„ì¬ ì €í¬ëŠ” Spring Data RESTë¥¼ ì ìš©í•œ ìƒíƒœì…ë‹ˆë‹¤. ì¦‰ ì—”ë“œí¬ì¸íŠ¸ë“¤ì´ ìë™ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ íŒŒì•…í•˜ì§€ ëª»í•œ ë¶€ë¶„ë“¤ì´ ìˆì„ ìˆ˜ ìˆì–´ API ëª…ì„¸ì„œëŠ” ë” ì¤‘ìš”í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# SpringBootì˜ Swagger / Open API
1. Swagger / Open API ë€?
  - OpenAPI Specification(OAS) : RESTful APIë¥¼ ì„¤ê³„, êµ¬ì¶•, ë¬¸ì„œí™”í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•˜ëŠ” í‘œì¤€ ì‚¬ì–‘.
  - Swagger : ì´ìƒì˜ í‘œì¤€ ì‚¬ì–‘ì„ êµ¬í˜„í•˜ì—¬ ê°œë°œìê°€ API êµ¬ì¡°ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•˜ê³  ì§ì ‘ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” íˆ´.
  - ë„ì… ëª©ì  : ë°±-í”„ë¡ íŠ¸ ê°„ í˜‘ì—… ì‹œ ë³„ë„ì˜ ë¬¸ì„œ ì‘ì„± ì—†ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” API ëª…ì„¸ì„œë¥¼ ì œê³µí•˜ê¸° ìœ„í•¨.
# API ë€ ?
## ì •ì˜
- Application Programming Interfaceì˜ ì¶•ì•½ì–´ë¡œ _ì„œë¡œ ë‹¤ë¥¸ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ëŒ€í™”í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê·œì¹™ì´ë‚˜ ë§¤ê°œì²´_
- ì†ë‹˜(Client) : ì£¼ë¬¸ì„ í•˜ëŠ” ì‚¬ëŒ(ì•±ì´ë‚˜ ì›¹ì‚¬ì´íŠ¸)
- ì£¼ë°©(Server) : ìš”ë¦¬ë¥¼ í•˜ëŠ” ê³³(ë°ì´í„°ë‚˜ ê¸°ëŠ¥ì„ ê°€ì§„ ì‹œìŠ¤í…œ)
- ì ì›(API) : ì†ë‹˜ì´ ì£¼ë¬¸ì„ ì£¼ë°©ì— ì „ë‹¬í•˜ê³ , ì£¼ë°©ì—ì„œ ë§Œë“  ìŒì‹ì„ ë‹¤ì‹œ ì†ë‹˜ì—ê²Œ ê°€ì ¸ë‹¤ ì£¼ëŠ” ì—­í• 

- ì´ìƒì—ì„œì˜ ì¤‘ìš”í•œ ì ì€ ì†ë‹˜ì€ ì£¼ë°© ì•ˆì—ì„œ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€(ë‚´ë¶€ ë¡œì§) ì•Œ í•„ìš”ê°€ ì—†ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì ì›ì—ê²Œ ì •í•´ì§„ ê·œì¹™(ë©”ë‰´)ëŒ€ë¡œ ë§í•˜ê¸°ë§Œ í•˜ë©´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ í•µì‹¬.

## APIì˜ í•µì‹¬ ì—­í• 
1. ì „ë‹¬ì : ìš”ì²­(request)ì„ ë°›ê³  ì‘ë‹µ(response) - req / resp ë¡œ ì‘ì„±í•˜ëŠ” ê²½ìš°ë„ ìˆìŒ.
2. ë³´ì•ˆ/ê´€ë¬¸ : ì•„ë¬´ë‚˜ ë°ì´í„°ë¥¼ ê°€ì ¸ê°€ì§€ ëª»í•˜ê²Œ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ì„ í—ˆìš©í•¨(API Keyë¥¼ í™œìš©í•©ë‹ˆë‹¤-ì±—ë´‡ ë§Œë“¤ ë•Œ ì¨ë´¤ìŠµë‹ˆë‹¤).
3. í‘œì¤€í™” : ì„œë¡œ ë‹¤ë¥¸ ì–¸ì–´(Java / Python ë“±)ë¡œ ë§Œë“¤ì–´ì§„ í”„ë¡œê·¸ë¨ë“¤ì´ ê°™ì€ ê·œì¹™ìœ¼ë¡œ ì†Œí†µí•˜ê²Œë” í•œë‹¤.

- ìš°ë¦¬ê°€ ë§Œë“  ë°±ì—”ë“œì˜ Controller í´ë˜ìŠ¤ê°€ APIì˜ ì…êµ¬ê°€ ë©ë‹ˆë‹¤. ì¦‰, Controller í´ë˜ìŠ¤ëŠ” í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ìš”ì²­ì´ ì™”ì„ ë•Œ ë§¨ ì²˜ìŒ ë°±ì—”ë“œ ìƒìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê´€ë¬¸ ì—­í• ì„ í•˜ëŠ” ê³³ì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# í”„ë¡œì íŠ¸ ì„¤ì •
1. SpringBoot 3.xx ë²„ì „ì—ì„œëŠ” `jakarta`ë¡œ ì¨ì•¼ í•©ë‹ˆë‹¤. í˜¹ì‹œ ì˜›ë‚  ë²„ì „ ë“¤ê³  ì˜¤ë©´ `javax`ë¡œ ì‘ì„±í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.
```java
	implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.8.15'
```
- starterê°€ í¬í•¨ëœ ë²„ì „ì„ ì‚¬ìš©í•´ì•¼ ì˜¤ë¥˜ê°€ ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- mvnì„ í†µí•  ê²½ìš° openapië¥¼ ê²€ìƒ‰í•˜ë©´ ë„ˆë¬´ ë­ê°€ ë§ì´ ë‚˜ì˜¤ëŠ”ë° starter/webmvc ì¡´ì¬ ìœ ë¬´ë¡œ ì²´í¬í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

2. application.properties ìˆ˜ì •
- Swagger UIì˜ ê²½ë¡œì™€ API ë¬¸ì„œì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. í˜„ì¬ ì €í¬ëŠ” Spring Data REST ë•Œë¬¸ì— basePathê°€ `/api`ë¡œ ë˜ì–´ìˆë‹¤ëŠ” ì ì„ ê¼­ ê³ ë ¤í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.

```java
# Swagger UI access path config(default : /swagger-ui/index.html)
springdoc.swagger-ui.path=/swagger-ui.html

# open api doc path
springdoc.api-docs.path=/api-docs

# Integrated Configuration related to the Spring Data REST
springdoc.show-data-rest=true
```

ì˜ˆë¥¼ ë“¤ì–´ ì´ìƒê¹Œì§€ë§Œ ì‘ì„±í–ˆë”ë¼ë„ http://localhost:8080/swagger-ui/index.html ë¡œ ì ‘ì†í–ˆì„ ê²½ìš°ì—
![alt text](image-5.png)
ì´ë ‡ê²Œ ëœ¹ë‹ˆë‹¤.

3. API ë¬¸ì„œ ìƒì„¸ ì„¤ì •

- `@Bean` : ë©”ì„œë“œ ë ˆë²¨ì˜ ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ, Spring ì»¨í…Œì´ë„ˆì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” ê°ì²´ì¸ ë¹ˆì„ ì •ì˜í•˜ê³  ë“±ë¡í•˜ëŠ” ì—­í• ì„ í•¨.

1. `@Bean`ì˜ ì •ì˜
  - ê°ì²´ ë“±ë¡ : í•´ë‹¹ ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ë¥¼ Springì˜ IoC(Inversion of Control) ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤.
  - ì„¤ì • ì†ŒìŠ¤ : ë³´í†µ `@Configuration` ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ ë‚´ì—ì„œ ì‚¬ìš©ë˜ë©°, ì´ í´ë˜ìŠ¤ëŠ” ë¹ˆ ì •ì˜ë¥¼ ì œê³µí•˜ëŠ” ì†ŒìŠ¤ ì—­í• ì„ í•©ë‹ˆë‹¤.
  - ìˆ˜ë™ ë“±ë¡ : ê°œë°œìê°€ ì§ì ‘ ì œì–´í•  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜, ë³µì¡í•œ ì´ˆê¸°í™” ë¡œì§ì´ í•„ìš”í•œ ê°ì²´ë¥¼ Spring ì»¨í…Œì´ë„ˆì— ë“±ë¡í•  ë•Œ ì‚¬ìš© í•©ë‹ˆë‹¤.

  - IoC ê°œë…ì€ ê¼­ê¼­ê¼­ê¼­ í™•ì¸í•  ê²ƒ.
```java
package com.korit12.cardatabase.config;

import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration  // ë¹ˆ ì •ì˜ë¥¼ ì œê³µí•˜ëŠ” ì†ŒìŠ¤ í´ë˜ìŠ¤ë¼ëŠ” ê²ƒì„ ëª…ì‹œ
public class OpenApiConfig {
    @Bean // ë©”ì„œë“œ ë¦¬í„´ ê°ì²´ë¥¼ Spring ë¹ˆìœ¼ë¡œ ë“±ë¡
    public OpenAPI cardatabaseOpenAPI() {
      // ì§ì ‘ OpenAPI ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì»¤ìŠ¤í„°ë§ˆì´ì§•(ë¹Œë”íŒ¨í„´ì„ í†µí•´)í•¨.
        return new OpenAPI()
                .info(new Info()
                        .title("Car Database API")
                        .description("ìë™ì°¨ ë° ì†Œìœ ì£¼ ê´€ë¦¬ë¥¼ ìœ„í•œ REST API ëª…ì„¸ì„œ")
                        .version("1.0.0")
                );
    }
}
```
- ìƒì„¸ ë™ì‘ ê´€ë ¨ ì¶”ê°€ ì„¤ëª…
    1. ì„¤ì • ì†ŒìŠ¤ ì¸ì‹ : SpringBoot ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë  ë•Œ `@Configuration`ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìŠ¤ìº”í•˜ì—¬ ë¹ˆ ì •ì˜ ì†ŒìŠ¤ë¡œ ì¸ì‹.
    2. ë©”ì„œë“œ ì‹¤í–‰ ë° ë“±ë¡ : í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ `@Bean`ì´ ë¶™ì€ cardatabaseAPI() ë©”ì„œë“œë¥¼ Springì´ ì§ì ‘ í˜¸ì¶œ
    3. ë¹ˆ ê´€ë¦¬ : ì´ìƒì˜ ë©”ì„œë“œì—ì„œ return ëœ OpenAPI ê°ì²´ëŠ” Spring ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ë³´ê´€. í•´ë‹¹ ê°ì²´ëŠ” ë‚˜ì¤‘ì— Swagger UIê°€ API ëª…ì„¸ì„œë¥¼ ìƒì„±í•  ë•Œ, ì œëª© / ì„¤ëª… / ë²„ì „ ë“±ì˜ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì„¤ì • ë°ì´í„°(Config)ë¡œ ì‚¬ìš©ë¨.
    4. ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ : ì´ì²˜ëŸ¼ `@Bean`ì„ í†µí•´ ì„¤ì • ì •ë³´ë¥¼ ë¶„ë¦¬, ê´€ë¦¬í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ë¡œì§ê³¼ ì™¸ë¶€ ì„¤ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  ìœ ì—°í•˜ê²Œ ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

# 1 ë²ˆ ì§ˆë¬¸ì— ëŒ€ë¹„í•œ Bean ì •ë¦¬
Spring í”„ë ˆì„ì›Œí¬ ìƒì—ì„œì˜ ë¹ˆì€ **ìŠ¤í”„ë§ì˜ IoC(ì œì–´ì˜ ì—­ì „) ì»¨í…Œì´ë„ˆê°€ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ìë°” ê°ì²´**ë¥¼ ì˜ë¯¸í•¨.

ë‹¨ìˆœíˆ ìš°ë¦¬ê°€ `new` í‚¤ì›Œë“œë¥¼ ì´ìš©í•˜ì—¬ ì§ì ‘ ìƒì„±í•˜ëŠ” ì¼ë°˜ì ì¸ Java ê°ì²´ì™€ëŠ” ë‹¬ë¦¬ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì˜í•´ ìƒëª…ì£¼ê¸°(ìƒì„±, ì´ˆê¸°í™”, ì†Œë©¸)ê°€ ê´€ë¦¬ë˜ëŠ” ê²ƒì´ íŠ¹ì§•.

1. ë¹ˆì˜ í•µì‹¬ ì—­í•  : ì˜ì¡´ì„± ì£¼ì…(DI : Dependency Injection)
    - ë¹ˆì€ `ApplicationContext`ë¼ëŠ” ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ë¹ˆì„ ê´€ë¦¬í•˜ë©°, ê°ì²´ ê°„ì˜ ì˜ì¡´ì„±ì„ ìë™ìœ¼ë¡œ ì—°ê²°í•´ì¤ë‹ˆë‹¤(field, constructor, setter ì£¼ì… ê°œë…ìˆì—ˆìŠµë‹ˆë‹¤).
    - ì´ìƒì„ í†µí•´ ì½”ë“œ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  ìœ ì—°ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ì˜ˆì‹œ : CarDatabaseApplication í´ë˜ìŠ¤ì—ì„œ ì§ì ‘ CarRepository ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  field ì„ ì–¸ì„ í†µí•´ì„œ ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” ë¹ˆì„ ì£¼ì… ë°›ì•„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

        - ì´ìƒì˜ ê²½ìš°ì— CarRepository carRepository = new CarRepository();ë¥¼ ì €í¬ê°€ í˜¸ì¶œí•œ ì ì´ ì—†ë‹¤ëŠ” ì ì—ì„œ Spring ì»¨í…Œì´ë„ˆì—ì„œ ì•Œì•„ì„œ ê°ì²´ ìƒì„±í•´ì„œ field ì£¼ì…ì„ í–ˆë‹¤ê³  í•´ì„í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.

2. ë¹ˆ ë“±ë¡ ë°©ë²•
    - `@Bean`ì€ ë¹ˆì„ ìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ê³ , ìœ„ì˜ ì˜ˆì‹œë¥¼ ìƒê°í–ˆì„ ë•ŒëŠ”
    - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ í†µí•´ì„œ ë” ìì£¼ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ë€, íŠ¹ì • ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ê²€ìƒ‰í•˜ì—¬ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    - CarRepositoryì— ì• ë„ˆí…Œì´ì…˜ì´ ì—†ëŠ”ë°ìš”ë¼ëŠ” ë‹µë³€ì´ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        - @Component : ì¼ë°˜ì ì¸ ì»´í¬ë„ŒíŠ¸ ë¹ˆ
        - @Service : ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
        - @Repository : ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì„ ë‹´ë‹¹í•˜ëŠ” ë¦¬í¬ì§€í† ë¦¬ í´ë˜ìŠ¤
        - @Controller / @RestController : ì›¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤
    - ì„¤ì • í´ë˜ìŠ¤ì—ì„œ ìˆ˜ë™ ë“±ë¡ : @Configuration ë‚´ë¶€ì—ì„œ @Beanì´ ìˆìœ¼ë©´ ìˆ˜ë™ ë“±ë¡ì´ ë©ë‹ˆë‹¤.

3. ë¹ˆì˜ íŠ¹ì§•
    1. ê´€ë¦¬ ì£¼ì²´ : ê°œë°œìê°€ ì•„ë‹ˆë¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê°ì²´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
    2. ì‹±ê¸€í†¤ ì›ì¹™ : ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¤í”„ë§ì€ ë¹ˆì„ ë‹¨ í•˜ë‚˜ë§Œ ìƒì„±í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ê³µìœ í•˜ì—¬ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤(ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±)
    3. ëª…ëª… ê·œì¹™ : ë¹ˆì€ ê³ ìœ í•œ ì´ë¦„ì„ ê°€ì§€ë©°, ìŠ¤í”„ë§ì€ ì´ ì´ë¦„ì„ í†µí•´ í•„ìš”í•œ ê³³ì— ì ì ˆí•œ ë¹ˆì„ ì°¾ì•„ ì£¼ì…í•©ë‹ˆë‹¤.

# ë°±ì—”ë“œ ë³´í˜¸

cardatabase3 ë§Œë“œì‹œê³ , ì£¼ì„ë“¤ ì¢€ ì§€ìš°ê² ìŠµë‹ˆë‹¤.

1. Spring Securityì˜ ì´í•´
2. JWT(JSON Web Token)ìœ¼ë¡œ ë°±ì—”ë“œ ë³´í˜¸
3. ì—­í•  ê¸°ë°˜ ë³´ì•ˆ(Role-based Security)

## ìŠ¤í”„ë§ ì‹œíë¦¬í‹°
- Java ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë³´ì•ˆ ì„œë¹„ìŠ¤ ì œê³µ ë¼ì´ë¸ŒëŸ¬ë¦¬.

- default ì„¤ì • ê°’
1. ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ì í•˜ë‚˜ë¥¼ í¬í•¨í•˜ëŠ” `AuthenticationManager` ë¹ˆ. usernameì€ user, ì•”í˜¸ëŠ” consoleì°½ì— ì¶œë ¥ë©ë‹ˆë‹¤(ë§ˆì¹˜ h2ì‚¬ìš©í–ˆì„ ë•Œ uri ê²½ë¡œê°€ ì„ì‹œì ìœ¼ë¡œ ë°œê¸‰ëë˜ ê²ƒê³¼ ë™ì¼í•©ë‹ˆë‹¤).
2. `/css`, `/images`ì™€ ê°™ì€ ì¼ë°˜ì ì¸ ì •ì  ë¦¬ì†ŒìŠ¤ ìœ„ì¹˜(resources/staticì— ë³´í†µ ì‘ì„±í–ˆì—ˆìŠµë‹ˆë‹¤)ì˜ ê²½ë¡œë¥¼ ë¬´ì‹œ. ë‹¤ë¥¸ ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ HTTPì— ì¸ì¦ì„ ìš”êµ¬í•¨.
3. ìŠ¤í”„ë§ ìì²´ì—ì„œì˜ `ApplicationEventPublisher` ì¸í„°í˜ì´ìŠ¤ë¡œ ë³´í˜¸ë˜ëŠ” ë³´í˜¸ ì´ë²¤íŠ¸.
4. HSTS, XSS, CSRF ë“± ì¼ë°˜ì ì¸ ì €ìˆ˜ì¤€ ê¸°ëŠ¥ì„ ê¸°ë³¸ì ìœ¼ë¡œ í™œì„±í™”.
5. ìë™ ìƒì„± ë¡œê·¸ì¸ í˜ì´ì§€

- ì˜ì¡´ì„± ì¶”ê°€í• ê²ë‹ˆë‹¤.

![alt text](image-6.png) 

- http://localhost:8080ìœ¼ë¡œ ì ‘ì†í–ˆì„ ë•Œ, í˜¹ì€ /apiê¹Œì§€ í•´ì„œ ì ‘ì†í–ˆì„ ë•Œ ì•Œì•„ì„œ /login ì—”ë“œí¬ì¸íŠ¸ë¡œ ë„˜ì–´ê°€ë©´ì„œ ë¡œê·¸ì¸í•  ê²ƒì„ ìš”êµ¬í•©ë‹ˆë‹¤.

- ì´ëŠ” build.gradleì— spring securityë¥¼ ì¶”ê°€í–ˆê¸° ë•Œë¬¸ì— ìƒê²¨ë‚œê²ë‹ˆë‹¤.

- ê·¸ëŸ°ë° ì¬ì‹¤í–‰í•´ë³´ë©´ ë¹„ë°€ë²ˆí˜¸ ë°”ë€Œì–´ìˆê³  ë˜ ì°¾ì•„ì„œ ë¡œê·¸ì¸í•´ì•¼í•˜ê³  ê·¸ëŸ° ìƒí™©ì´ ë²Œì–´ì§‘ë‹ˆë‹¤. username / passwordë¥¼ ê³ ì •ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•œ Config í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´ì•¼ë§Œ í•©ë‹ˆë‹¤. í•´ë‹¹ í´ë˜ìŠ¤ ë‚´ì—ì„œ íŠ¹ì • ì—­í• ì´ë‚˜ ì‚¬ìš©ìê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” URL ë˜ëŠ” URL íŒ¨í„´ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜, ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤, ì„¸ì…˜ ê´€ë¦¬ ë“±ë„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- config íŒ¨í‚¤ì§€ ë‚´ì— SecurityConfig í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ì‹œì˜¤.

```java
package com.korit12.cardatabase.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public InMemoryUserDetailsManager userDetailsService() {
        UserDetails user = User.builder()
                .username("user")
                .password(passwordEncoder().encode("password"))
                .roles("USER")
                .build();
        return new InMemoryUserDetailsManager(user);
    }
    
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```

- ì´ìƒì˜ ì½”ë“œì—ì„œ `@Configuration, @EnableWebSecurity` ì• ë„ˆí…Œì´ì…˜ì€ default ì›¹ ë³´í˜¸ êµ¬ì„±ì„ í•´ì œí•˜ê³ , ê°œë°œìê°€ ì§ì ‘ Config ê´€ë ¨ ì„¤ì •ì„ ì •ì˜í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤. ì´í›„ ìˆ˜ì—…ì—ì„œ `filterChain(HttpSecurity http)` ë©”ì„œë“œ ë‚´ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì–´ë–¤ ì—”ë“œí¬ì¸íŠ¸ê°€ ë³´í˜¸ë˜ê³  ìˆëŠ”ì§€, ì–´ë–¤ ì—”ë“œí¬ì¸íŠ¸ê°€ ë³´í˜¸ë˜ê³  ìˆì§€ ì•Šì€ì§€ ì •ì˜í•  ìˆ˜ ìˆë‹¤(ì¸ë©”ëª¨ë¦¬ ë²—ì–´ë‚˜ë©´ ì„¤ëª… ì˜ˆì •).

- UserDetailsServiceë¥¼ êµ¬í˜„í•˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ InMemoryUserDetailsServiceë¥¼ ì´ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì¸ë©”ëª¨ë¦¬ userë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤(ì‚¬ì‹¤ í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œë§Œ ì í•©í•©ë‹ˆë‹¤). ë©”ëª¨ë¦¬ì— ì €ì¥ëœ user/password ì¸ì¦ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. Builder patternì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤.

- H2ì—ì„œ í™•ì¸í•˜ì…¨ë“¯ì´ ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ìëŠ” DBì— ì €ì¥ëœ ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ê»ë‹¤ ì¼œë©´ ì´ˆê¸°í™”ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. User ê´€ë ¨ ì†ì„±ì„ DBì— ì €ì¥í•˜ê³  ì‹¶ë‹¤ë©´ Car / Ownerì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì—”í‹°í‹° í´ë˜ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´ì•¼ë§Œ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì•”í˜¸ëŠ” ì¼ë°˜ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ DBì— ì €ì¥í•˜ë©´ ë³´ì•ˆ ë¬¸ì œê°€ ìƒê¸°ê² ë„¤ìš”.

- AppUser ì—”í‹°í‹° í´ë˜ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ì‹œì˜¤.

- findByUsername ë©”ì„œë“œë¥¼ ì •ì˜í•˜ì‹œì˜¤. -> ì–´ë””ì— ì–´ë–»ê²Œ ì ì„ì§€ ë– ì˜¬ë¼ì•¼ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

```java

package com.korit12.cardatabase.domain;

import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface AppUserRepository extends JpaRepository<AppUser, Long> {
    Optional<AppUser> findByUsername(String username);
}
```

- ì´ìƒì—ì„œ ì£¼ëª©í•´ì•¼ í•  ê²ƒì€ ì—¬íƒœê¹Œì§€ CarRepositoryì— ì¶”ìƒ ë©”ì„œë“œë“¤ì„ ì •ì˜í–ˆì„ ë•ŒëŠ” ê²°ê³¼ê°’ë“¤ì´ ê¸°ë³¸ì ìœ¼ë¡œ ë³µìˆ˜ë¡œ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì— List ìë£Œí˜•ì„  ì¼ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ findByUsername() ë©”ì„œë“œì˜ ê²½ìš°ì—ëŠ” AppUserì˜ fieldì¸ usernameì´ ê¸°ë³¸ì ìœ¼ë¡œ `@Column(nullable=false, unique=true)`ë¼ëŠ” ì„¤ì • ë•Œë¬¸ì— ê²°ê³¼ê°’ì´ í•˜ë‚˜ê±°ë‚˜, ì•„ë‹ˆë©´ 0ê°œì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ return typeì„ listë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì ì ˆí•˜ì§€ ì•Šì€ ì„ íƒì§€ê°€ ë ê²ë‹ˆë‹¤. ê·¸ë˜ì„œ ì˜›ë‚ ì—ëŠ” NullPointExceptionì´ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ìƒê²¼ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”

```java
public AppUser findByUsername(String username) {
  if(usernameì´ DB ë‚´ì—ì„œ ì¼ì¹˜í•˜ëŠ” usernameì´ ìˆë‹¤ë©´) {
    return ì¼ì¹˜í•˜ëŠ”ê°ì²´ì „ì²´ë¥¼return(AppUserìë£Œí˜•ì´ë‹ˆê¹Œ)
  }
}
```
ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë¯¸ë¦¬ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° AppUserRepositoryëŠ” ì¸í„°í˜ì´ìŠ¤ë‹ˆê¹Œ ì¼ë°˜ ë©”ì„œë“œë¥¼ ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¦‰, findByUsername()ì´ í•„ìš”í• ë•Œë§ˆë‹¤ ì´ìƒì˜ ë¡œì§ì´ í•­ìƒ í•„ìš”í•˜ë‹¤ëŠ” ë¬¸ì œì ì´ ìƒê²¼ìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ìë£Œí˜•ì´ `Optional`ì— í•´ë‹¹í•©ë‹ˆë‹¤.

- ì´ê±´ ì²˜ìŒë°°ìš°ëŠ” ìë£Œí˜•ì— í•´ë‹¹í•©ë‹ˆë‹¤. Optional ë‚´ë¶€ì—ëŠ” nullì´ ì¡´ì¬í•  ìˆ˜ ìˆëŠ”ë°, ê·¸ ìƒí™©ì—ì„œë„ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë§Œ Optional ë‚´ë¶€ì— AppUser ìë£Œí˜•ì´ ì¡´ì¬í•œë‹¤ë©´, AppUser ê°ì²´ë¥¼ êº¼ë‚´ëŠ” ë³„ê°œì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.

- domainê³¼ ë™ì¼í•œ ìˆ˜ì¤€ì— service íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤. -> ë‚´ë¶€ì— UserDetailsServiceImplì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```java
package com.korit12.cardatabase.service;

import com.korit12.cardatabase.domain.AppUser;
import com.korit12.cardatabase.domain.AppUserRepository;
import lombok.AllArgsConstructor;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.User.UserBuilder;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;

import java.util.Optional;

@Service
@AllArgsConstructor
public class UserDetailsServiceImpl implements UserDetailsService {
    // field ì„ ì–¸
    private AppUserRepository appUserRepository;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        Optional<AppUser> user = appUserRepository.findByUsername(username);

        UserBuilder builder = null;
        if(user.isPresent()) {  // ì´í•˜ì˜ ì‹¤í–‰ë¬¸ì´ ì‹¤í–‰ëœë‹¤ë©´ userì— AppUser ê°ì²´ê°€ ìˆë‹¤ëŠ” ì˜ë¯¸ -> ì•„ì§ userëŠ” Optional ìë£Œí˜•ì´ë‹ˆê¹Œìš”
            AppUser currentUser = user.get(); // Optionalì—ì„œ ì œë„¤ë¦­ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ê°ì²´ë¥¼ ë¹¼ëŠ” ë©”ì„œë“œê°€ .get()ì…ë‹ˆë‹¤.
            builder = User.withUsername(username)
                    .password(currentUser.getPassword())   // AppUserì— @Data ë‹¬ì•„ë†¨ìŠµë‹ˆë‹¤.
                    .roles(currentUser.getRole());
        }else {
            throw new UsernameNotFoundException("í•´ë‹¹ usernameì„ ê°€ì§„ ì‚¬ìš©ìë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
        }
        return builder.build();
    }
}
```

- ì´ìƒì˜ ì½”ë“œì—ì„œ ì§‘ì¤‘í•´ì„œ ë´ì•¼í•  ì ì€ ì¼ë‹¨ í´ë˜ìŠ¤ëª…ì…ë‹ˆë‹¤. UserDetailsServiceImplì´ë¼ëŠ” ì´ë¦„ì„ ì§€ë‹ˆê³  ìˆëŠ”ë°, ì´ëŠ” ëŒ€í‘œì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„(implement)í•œ í´ë˜ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ ëª…ëª…ë²•ìœ¼ë¡œ `ì¸í„°í˜ì´ìŠ¤ëª…+Impl`ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤. ì¦‰, UserDetailsServiceë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ì¶”ìƒ ë©”ì„œë“œë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¼ì„œ UserDetailsServiceImplì´ ë˜ëŠ”ê²ë‹ˆë‹¤. ê·¸ë˜ì„œ ë”ëŸ½ê²Œ ì½ê¸° í˜ë“œë„¤ê°€ ì•„ë‹ˆë¼ ìµœì´ˆ ëª…ëª…ë²• ë°œìƒ ë‹¹ì‹œì—ëŠ” ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•œ í´ë˜ìŠ¤ ì´ë¦„ì§“ê¸° ë°©ì‹ì´ì—ˆë‹¤ê³  ë´ì•¼í•©ë‹ˆë‹¤.

- loadUserByUsername() ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ AppUser í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ user(ê°ì²´ëª…ì…ë‹ˆë‹¤)ë¥¼ ê·¸ëŒ€ë¡œ ì“°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì–´ë””ì„œ UserBuilderë¼ê³  ì´ìƒí•œê±° ê°€ì§€ê³  ì™€ì„œ ì„ ì–¸í•˜ê³ , ê±°ê¸° ë‚´ë¶€ì— AppUserì˜ fieldì˜ ê°’ë“¤ì„ í•˜ë‚˜ì”© ëŒ€ì…í•œ ë‹¤ìŒì— returní–ˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì´ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ì •ì˜ë¥¼ ëª…í™•í•˜ê²Œ ì•Œì§€ ëª»í•˜ë©´ íš¨ìœ¨ì ì´ì§€ ëª»í•œ ì½”ë“œë¡œ í•´ì„ë  ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ì¸í„°í˜ì´ìŠ¤ëŠ” ì¶”ìƒ ë©”ì„œë“œë§Œ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ ë‚´ì— ìˆëŠ” ì¶”ìƒ ë©”ì„œë“œë“¤ì„ ê°•ì œë¡œ êµ¬í˜„í•´ì•¼ë§Œ í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ AppUserë¼ê³  í•˜ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì´ì „ì— ì¸í„°í˜ì´ìŠ¤ê°€ ì¡´ì¬í–ˆê³ , ì´ë¥¼ êµ¬í˜„í–ˆìœ¼ë¯€ë¡œ ë‹¹ì—°íˆ ì¶”ìƒ ë©”ì„œë“œë“¤ì˜ return typeì€ AppUserê°€ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë˜í•œ ë‹¤ë¥¸ ê°œë°œìë“¤ë„ ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê·¸ëŒ€ë¡œ ê°–ë‹¤ ì“¸ ê²ƒì´ê¸° ë•Œë¬¸ì— ìë£Œí˜•ì— ëŒ€í•œ ë³´í¸ì ì¸ í¼ì´ ì¡´ì¬í•´ì•¼ë§Œ í•˜ê² ë„¤ìš”. ê·¸ë ‡ê²Œ ì¶”ìƒ ë©”ì„œë“±ë‹ˆ loadUserByUsername()ì˜ return íƒ€ì…ì´ ê³ ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ìš°ë¦¬ëŠ” ìš°ë¦¬ê°€ ë§Œë“  entity classì˜ ê°ì²´ë¥¼ UserDetails í´ë˜ìŠ¤ì˜ ê°ì²´ í˜•íƒœë¡œ ëŒ€ì…í•´ì£¼ëŠ” ê³¼ì •ì„ ê±°ì³ì•¼ë§Œ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ifë¬¸ ë‚´ë¶€ì˜ ì‹¤í–‰ë¬¸ì—ì„œ ëŒ€ì…ë¡œì§ì´ ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤. elseëŠ” ë‹¹ì—°íˆ ì¼ì¹˜í•˜ëŠ” AppUserê°€ ì—†ë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ê²Œ ë˜êµ¬ìš”.

- ì´í›„ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ì ëŒ€ì‹ ì— ë°©ê¸ˆ ë§Œë“  AppUser ê´€ë ¨ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì‚¬ìš©ìë¥¼ ì°¸ì¡°í•˜ê²Œë” ì½”ë“œë¥¼ ìˆ˜ì •í•  ì˜ˆì •ì…ë‹ˆë‹¤.

```java
package com.korit12.cardatabase.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public InMemoryUserDetailsManager userDetailsService() {
        UserDetails user = User.builder()
                .username("user")
                .password(passwordEncoder().encode("password"))
                .roles("USER")
                .build();
        return new InMemoryUserDetailsManager(user);
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```
ì¸ë©”ëª¨ë¦¬ ë‚ ë¦¬ê¸° ì „ì— ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ë³µì‚¬.

```java
package com.korit12.cardatabase.config;

import com.korit12.cardatabase.service.UserDetailsServiceImpl;
import lombok.AllArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;

@Configuration
@EnableWebSecurity
@AllArgsConstructor
public class SecurityConfig {
    private UserDetailsServiceImpl userDetailsService;

    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(userDetailsService);
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```

bcryptëŠ” ë‹ìŠ¤ í”„ë¡œë³´ìŠ¤ / ë°ì´ë¹„ë“œ ë§ˆì§€ì—ë¥´ê°€ ì„¤ê³„í•œ í•´ì‹±í•¨ìˆ˜ë¡œ, ì˜ˆë¥¼ ë“¤ì–´ `$2a$12$7fxsEn.3tS35LWlhzAPzn.lE3l1MquXo6C3.X5NlTF/kLWrSNkwJW` ëŠ” admin ë¬¸ìì—´ì—ì„œ ìƒì„±ë˜ëŠ” bycriptì˜ ì˜ˆì‹œì…ë‹ˆë‹¤.

`$2a`ëŠ” ì•Œê³ ë¦¬ì¦˜ ë²„ì „ì„ ì˜ë¯¸í•˜ê³ , `$12`ëŠ” ì•Œê³ ë¦¬ì¦˜ ê°•ë„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê·¸ë¦¬ê³  Spring Security ìƒì—ì„œì˜ BcryptPAsswordEncoderì˜ ê¸°ë³¸ ê°•ë„ëŠ” 10ìœ¼ë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.

ê·¼ë°  http://localhost:8080/api/appUsersë¥¼ ë“¤ì–´ê°€ë©´ 
```json
{
    "_embedded": {
        "appUsers": [
            {
                "username": "user",
                "password": "$2a$12$T0LCeRQ9tABPO.xi5XDMsekVpkwjx06iogCJvENxEosh2wjhGlbDS",
                "role": "User",
                "_links": {
                    "self": {
                        "href": "http://localhost:8080/api/appUsers/1"
                    },
                    "appUser": {
                        "href": "http://localhost:8080/api/appUsers/1"
                    }
                }
            },
            {
                "username": "admin",
                "password": "$2a$12$7fxsEn.3tS35LWlhzAPzn.lE3l1MquXo6C3.X5NlTF/kLWrSNkwJW",
                "role": "ADMIN",
                "_links": {
                    "self": {
                        "href": "http://localhost:8080/api/appUsers/2"
                    },
                    "appUser": {
                        "href": "http://localhost:8080/api/appUsers/2"
                    }
                }
            }
        ]
    },
    "_links": {
        "self": {
            "href": "http://localhost:8080/api/appUsers?page=0&size=20"
        },
        "profile": {
            "href": "http://localhost:8080/api/profile/appUsers"
        },
        "search": {
            "href": "http://localhost:8080/api/appUsers/search"
        }
    },
    "page": {
        "size": 20,
        "totalElements": 2,
        "totalPages": 1,
        "number": 0
    }
}
```
ë¼ëŠ” ê²°ê³¼ê°’ì„ ì–»ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ìê¸°ê°€ ë¡œê·¸ì¸ë§Œ ë˜ì–´ìˆìœ¼ë©´ ë‹¤ë¥¸ ì‚¬ëŒë“¤ ë¹„ë°€ë²ˆí˜¸ í•´ì‹± í•¨ìˆ˜ ë²„ì „ì„ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ê·¸ë˜ì„œ AppRepositoryë¥¼ í†µí•´ì„œ ìš”ì²­ì„ ë‚ ë¦¬ì§€ ëª»í•˜ë„ë¡ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŠ” Spring Data REST ë•Œë¬¸ì— ìë™ìœ¼ë¡œ AppUser ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ê°€ ìƒì„±ë˜ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.